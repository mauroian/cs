//
//	_grid.scss	
//
// 	Mauro Iannicelli (June '23)
//
//	Usage:		@import "_grid";
//
//	It generates classes such as:
//
//	Container classes:
//	.cs-container-fluid |  .cs-container  |  .cs-container-sm  |  .cs-container-md  |  .cs-container-lg  |  .cs-container-xl  (SIMILAR TO BOOTSTRAP)
//
//	Col classes:
// 	.cs-col  |  .cs-col-1 ... .-col-12
// 	.cs-col-sm  |  .cs-col-sm-1 ... .cs-col-sm-12
//	...
// 	.cs-col-xl  |  .cs-col-xl-1 ... .cs-col-xl-12
//
//	Row classes:
//	.cs-row  |  .cs-row > *
//
//	Width classes
//	cs-w-100 | cs-w-75 | cs-w-66 | cs-w-50 | cs-w-33 | cs-w-25

@import "_variables";
@import "_utilities";


// container classes:
@mixin generate-container-classes($breakpoints,$container-max-widths) {

	@include newLine();
	/* .#{$class-prefix}container-fluid class */
	@include newLine();

	.container-fluid {
		width: 100%;
		margin-left: auto;
		margin-right: auto;
	}

	$breakpoint-names: get-list-of-keys-from-map($breakpoints);
	$breakpoint-values: get-list-of-values-from-map($breakpoints);
	$container-max-widths-values: get-list-of-values-from-map($container-max-widths);	
	$num-breakpoints: length($breakpoint-names);

	$i:0;
	@each $breakpoint-name in $breakpoint-names {

		@include newLine();
		/* .#{$class-prefix}container-#{$breakpoint-name} class */			
		@include newLine();

		.#{$class-prefix}container-#{$breakpoint-name} {
			width: 100%;
			margin-left: auto;
			margin-right: auto;
		}

		$i: $i + 1;
		@if $i == 1 {
			.#{$class-prefix}container {
				@extend .#{$class-prefix}container-#{$breakpoint-name};
			}			  
		}

		@for $i-nested from $i through $num-breakpoints {

			$breakpoint-name-nested: get-value-from-list-by-index($breakpoint-names, $i-nested);
			$breakpoint-value-nested: get-value-from-list-by-index($breakpoint-values, $i-nested);
			$container-max-width-value-nested: get-value-from-list-by-index($container-max-widths-values, $i-nested); 

			@media (min-width: #{$breakpoint-value-nested}) {
				.#{$class-prefix}container-#{$breakpoint-name} {
					max-width: #{$container-max-width-value-nested};
				}
			}
		}
	}
}

// row classes
@mixin generate-row-classes() {
	.#{$class-prefix}row {
		display: flex;
		flex-wrap: wrap;
	}

	/* For mobile-first (like in Bootstrap) the columns would be stacked by default and we should write:
	.#{$class-prefix}row > * {
		flex-shrink: 0;
		width: 100%;
		max-width: 100%;
	}
	*/

	/* Since we adopt desktop-first: */
	.#{$class-prefix}row>* {
		flex: 1 0 0%;  /* columns next to each other and equal */
		/* note: because of the above setting, in each col-n class, I must set the flex property back 
		to its default value (otherwise the col classes would not work), which is:  flex: 0 1 auto; */
	}
}

@mixin generate-col-classes($breakpoints) {

	/* Note: to make columns stack onto each other, assign to each div a col-12 class (or col-sm-12... col-md-12- etc,) */

	//col, col-1...n:

	/* .#{$class-prefix}col, .#{$class-prefix}col-1...n classes */
	.#{$class-prefix}col {
		flex: 1 0 0%; /* columns next to each other and equal */
		padding: 0px;
	}

	@for $i from 1 through 12 {
		.#{$class-prefix}col-#{$i} {
				width: calc(100% * (#{$i} / 12));
				flex: 0 1 auto; /* flex back to its default value */
				padding: 0px;
		}
	}

	//col-<bp>, col-<bp>-1...n:
	
	@each $breakpoint-name, $breakpoint-value in $breakpoints {

		@if $breakpoint-name !="" {
			$breakpoint-name: "-"+$breakpoint-name;
		}
	
		/* .#{$class-prefix}col#{$breakpoint-name}, .#{$class-prefix}col#{$breakpoint-name}-1...n classes */
	
		@include newLine();
	
		//col class | col<bp> class 
		@media (min-width: $breakpoint-value) {
			.#{$class-prefix}col#{$breakpoint-name} {
				flex: 1 0 0%; /* columns next to each other and equal */
				padding: 0px;
			}
		}
	
		//col-1...n classes | col-<bp>-1...n classes 
		@for $i from 1 through 12 {
			.#{$class-prefix}col#{$breakpoint-name}-#{$i} {
				@media (min-width: $breakpoint-value) {
					width: calc(100% * (#{$i} / 12));
					flex: 0 1 auto; /* flex back to its default value */
					padding: 0px;
				}
			}
		}
	}
}

// generate container classes
@include generate-container-classes($breakpoints,$container-max-widths);

// generate row classes
@include generate-row-classes();

// generate col classes
@include generate-col-classes($breakpoints);


/* Width classes */
.#{$class-prefix}w-100 {
	width: 100%;
}
.#{$class-prefix}w-75 {
	width: 75%;
}
.#{$class-prefix}w-66 {
	width: 75%;
}
.#{$class-prefix}w-50 {
	width: 50%;
}
.#{$class-prefix}w-33 {
	width: 75%;
}
.#{$class-prefix}w-25 {
	width: 25%;
}

